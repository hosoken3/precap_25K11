# サーボモーター制御プログラムの使い方

このプログラムは、サーボモーターの動きをかんたんに制御するためのものです。`commands.json`というファイルに動かしたい内容を書き込むだけで、その通りにモーターを動かし、動きの記録（ログ）を自動で保存してくれます。

## 使い方

1.  **動かし方を設定する (`commands.json`)**
    `commands.json`ファイルを開き、モーターにさせたい動きを JSON 形式で記述します。角度（`angle`）や速さ（`speed`）を自由に設定できます。

    **設定例:**

    ```json
    [
      {
        "mode": "rotate",
        "angle": 90,
        "angle_unit": "degrees",
        "speed": 50,
        "speed_unit": "%"
      },
      {
        "mode": "rotate",
        "angle": 0,
        "angle_unit": "degrees",
        "speed": 30,
        "speed_unit": "%"
      }
    ]
    ```

    - `mode`: `"rotate"`（回転）か`"stop"`（停止）を選びます。
    - `angle`: モーターの角度を 0 度から 180 度の間で指定します。
    - `speed`: モーターの速さを 0 から 100 の間のパーセンテージで指定します。

2.  **プログラムを実行する (`controller.py`)**
    `controller.py`を実行すると、`commands.json`に書かれた内容に従ってモーターが動き始めます。

3.  **結果を確認する (`rotation_log.csv`)**
    プログラムが動くと、モーターの動きが`rotation_log.csv`というファイルに記録されます。このファイルを開くと、いつ、どのような指示でモーターが動いたかを確認できます。

## ファイルの役割

- `controller.py`: メインのプログラムです。このファイルを実行します。
- `commands.json`: モーターの動きの指示を書き込む設定ファイルです。
- `rotation_log.csv`: モーターの動きの記録が保存されるログファイルです。
- `README.md`: このファイルです。プログラムの使い方が書かれています。

## 安全機能：非常停止ボタン

このシステムには、GPIO ピン 23 に接続された非常停止ボタンがあります。万が一の際には、このボタンを押すことで、ただちにすべての動作を停止し、安全にプログラムを終了できます。
